<a href="images/NLA-Stride_LOGO2.png"><img src="images/NLA-Stride_LOGO2.png" width="250"></a>

# 사용 설명서 (한국어)

> 본 설명서는 NLA-Stride Blender 애드온의 빠른 시작, 조작 가이드 및 고급 팁을 소개합니다.

---

## 📘 목차

1. [빠른 시작](#-빠른-시작)  
2. [기능 개요](#-기능-개요)      
3. [자주 묻는 질문](#-자주-묻는-질문) 
4. [기타](#-기타) 
5. [기술 참조](#-기술-참조)

---

## 🚀 빠른 시작

### 1. 애드온 설치

1. Blender 공식 설치 단계를 따르십시오 ( **[일반 설치 가이드](https://docs.blender.org/manual/en/latest/editors/preferences/addons.html)** ).

2. 설치 후, Blender 3D 뷰포트의 **사이드바 (N) → 애니메이션** 탭에서 **NLA Stride Tool**을 확인할 수 있습니다.


![alt text](images/img_1001.png)



---

### 2. 애니메이션이 있는 오브젝트 선택

<a href="images/img_1002.png">
  <img src="images/img_1002.png" width="650">
</a>

애니메이션 데이터를 포함하는 하나 이상의 오브젝트를 선택합니다. NLA 스트립이 아닌 표준 액션(Action)인 경우, "NLA로 일괄 푸시" 섹션을 참조하십시오.

---

### 3. 리스트에 추가

![alt text](images/img_1003.png)

⚠️ 주의: 애드온은 현재 뷰포트 선택 항목과 관계없이 리스트를 기준으로 작동합니다.

---

### 4. NLA 정렬 / 오프셋 작업


<a href="images/img_1004.png"><img src="images/img_1004.png" width="650"></a>

<a href="images/img_1005.png"><img src="images/img_1005.png" width="650"></a>

<a href="images/img_1006.png"><img src="images/img_1006.png" width="650"></a>


위는 NLA 정렬 및 오프셋 기능의 데모입니다.

---

### 5. 애니메이션의 마법을 즐기세요

<a href="images/DEMO_01.mp4">
  <img src="images/DEMO_01.gif" width="720">
</a>

<a href="images/DEMO_02.mp4">
  <img src="images/DEMO_02.gif" width="720">
</a>

<a href="images/DEM3_03.mp4">
  <img src="images/DEMO_03.gif" width="720">
</a>

<a href="images/DEM3_04.mp4">
  <img src="images/DEMO_04.gif" width="720">
</a>

예제 모델을 제공해주신 대만 브랜드 [SANSUI / 山水](https://www.sansuitw.com/?gad_source=1&gad_campaignid=23085773952&gbraid=0AAAAAoXC59ENhboAZDO-y0zK4yQpidtXM&gclid=CjwKCAiAybfLBhAjEiwAI0mBBscjnZOEYBBY127EypNMfnL1h_Vqm_HACczeJBOqMK-euDJFPb1iAxoC7rkQAvD_BwE)에 감사드립니다.

---

## 🧰 기능 개요

#### 1. 데이터 소스 

![alt text](images/img_2001.png)

- A : 초기화 및 선택 항목 추가
  
  리스트를 먼저 비운 다음, 씬에서 현재 선택된 오브젝트를 추가합니다.
<br>

- B : 리스트 초기화
  
  리스트 내의 모든 데이터를 삭제합니다.
  <br>

- C : 애니메이션 소스
  
  현재 다음 세 가지 유형을 지원합니다:
    -  오브젝트 애니메이션  
    -  쉐이프 키 애니메이션  
    -  마テリアル 애니메이션
<br>

- D : 리스트 항목 추가 / 제거
  
  추가 시 기존 항목은 **삭제되지 않으며**, 오브젝트는 **선택한 순서**대로 끝에 추가됩니다. 이미 리스트에 있는 오브젝트를 선택하면 리스트의 마지막으로 이동합니다. 이 추가 로직은 'A'와 다릅니다. 삭제 도구 또한 '1-J'와 다릅니다.
<br>

- E : 리스트 조작 (드롭다운 메뉴)
  
  자세한 내용은 [1-1 리스트 조작](#1-1-리스트-조작)을 참조하십시오.
<br>

- F : 리스트 항목 위로 / 아래로 이동
  
  순서를 수동으로 조정합니다. 수동으로 조정된 결과는 **"원래 순서"**로 정의됩니다.
<br>

- G : NLA로 푸시 (드롭다운 메뉴)
  
  리스트 내의 오브젝트에 대해서만 활성 액션을 NLA 스트립으로 변환합니다.
<br>
  
  
-  PS. [3. 리스트 아이콘의 의미](#3-리스트-아이콘의-의미)

#### 1-1. 리스트 조작

![alt text](images/img_2002.png)

- H : 초기화 및 선택 항목 추가
 
  리스트를 비운 후 현재 씬의 선택 항목을 추가합니다.
<br>

- I : 네 가지 정렬 옵션
  
  가장 중요한 것은 **원래 순서로 복구**입니다. 애드온은 이 시퀀스를 기록합니다. 나머지 세 개는 자동 정렬입니다.
<br>

- J : 씬의 선택 항목 제거
 
  3D 뷰포트의 현재 선택을 기준으로 리스트에서 오브젝트를 제거합니다. 이는 '1-D' 제거 도구와 다릅니다.

#### 2. 데이터 위치 지정

![alt text](images/img_2003.png)

- K : 세 가지 스트립 모드
  - 단일 스트립: 특정 스트립 하나만 대상으로 합니다.
  - 단일 트랙: 한 트랙 위의 모든 스트립을 하나의 그룹으로 취급합니다 (상대적 위치 유지).
  - 모든 트랙: 오브젝트의 모든 트랙을 동시에 변경하는 것과 같습니다 (상대적 위치 유지).
<br>

- L : 세 가지 위치 지정 기준
  - 슬롯 지정: (마테리얼 모드 전용) UI에서 **위에서 아래** 방향으로 계산됩니다.
  - 트랙 지정: NLA 에디터에서 **아래에서 위** 방향으로 계산됩니다.
  - 스트립 지정: NLA 에디터에서 **왼쪽에서 오른쪽** 방향으로 계산됩니다.
<br>

  **!! 주의: 대상이 올바르게 지정되지 않으면 NLA Stride는 오프셋을 수행할 수 없습니다.**

#### 3. NLA 정렬 툴 (초기화 값)
![alt text](images/img_2004.png)

- M : 다섯 가지 정렬 대상
  - 최대 시작 프레임 기준: 리스트에서 가장 **늦게** 시작하는 스트립의 **시작점**에 맞춥니다.
  - 최소 시작 프레임 기준: 리스트에서 가장 **빨리** 시작하는 스트립의 **시작점**에 맞춥니다 (일반적 사용).
  - 최대 종료 프레임 기준: 리스트에서 가장 **늦게** 끝나는 스트립의 **끝점**에 맞춥니다 (일반적 사용).
  - 최소 종료 프레임 기준: 리스트에서 가장 **빨리** 끝나는 스트립의 **끝점**에 맞춥니다.
  - 현재 재생 프레임 기준: 현재 플레이헤드 위치에 맞춥니다 (가장 흔히 사용).
<br>

- N : 세 가지 정렬 모드
  - 시작점에 맞춤: 스트립의 왼쪽을 대상에 맞춥니다. 주로 **시작점** 정렬에 사용됩니다.
  - 중간점에 맞춤: 스트립의 중앙을 대상에 맞춥니다.
  - 끝점에 맞춤: 스트립의 오른쪽을 대상에 맞춥니다. 주로 **끝점** 정렬에 사용됩니다.
<br>

- O : 스케일 초기화
  
  리스트 내 모든 NLA 스트립의 스케일 값을 1.0으로 리셋합니다.


#### 4. 간편 모드

![alt text](images/img_2005.png)

- P : 감쇠 모드 [(자세한 설명)](#2-오프셋-설명)
  
  - 네 가지 계산식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
<br>

- Q : 오프셋 양 (단위: **프레임**)
  
  - 개별 스트립 사이의 간격이 아니라, 리스트의 첫 번째와 마지막 오브젝트 사이의 전체 차이입니다 (음수 값 가능).
<br>

- R : 스케일
  
  - 증분 스케일이 아니라, 리스트의 첫 번째와 마지막 오브젝트 사이의 스케일 차이(0 ~ 1)입니다.
<br>

- S : 간편 NLA 스트라이드 실행 (반복 클릭 시 계산이 누적됩니다).
<br>

#### 5. 프로 모드
![alt text](images/img_2006.png)
  **>> 이 애드온의 핵심입니다. 간단한 설정으로 스트립 오프셋과 스케일이 자동으로 조정됩니다 <<**

- T : 감쇠 모드 [(자세한 설명)](#2-오프셋-설명)
  
  - 네 가지 계산식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
<br>

- U : 시작 프레임 설정
  
  - 리스트 내 모든 오브젝트의 전체 애니메이션 시퀀스에 대한 **시작** 시간을 설정합니다.
<br>

- V : 오프셋 비율 (시작)
  
  - 감쇠 모드(T)를 곱하여 오프셋을 계산하며, 모든 스트립 시작점의 자동 배치에 사용됩니다.
<br>

- W : 감쇠 모드 [(자세한 설명)](#2-오프셋-설명)
  
  - 네 가지 계산식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
<br>

- X : 종료 프레임 설정
  
  - 리스트 내 모든 오브젝트의 전체 애니메이션 시퀀스에 대한 **종료** 시간을 설정합니다.
<br>

- Y : 오프셋 비율 (종료)
  
  - 스트립 종료 지점의 오프셋 비율입니다.
<br>

- Z : 프로 NLA 스트라이드 실행 (반복 클릭해도 계산이 누적되지 **않습니다**).
<br>


---

## ❓ 자주 묻는 질문


#### 1. ⚠️ "인스턴스화된 데이터(Instanced Data)" 주의

이 애드온은 주로 NLA 스트립 자체의 오프셋과 정렬을 처리하며, Blender의 "인스턴스화된 데이터" 관계를 자동으로 처리하지 **않습니다**.

#### 인스턴스화된 데이터란 무엇인가요?

**여러 오브젝트가 동일한 데이터를 공유**할 때, 해당 데이터 블록은 "인스턴스화"된 상태입니다.

- 예:  
  - 두 오브젝트가 동일한 마테리얼을 공유함.
  - 동일한 액션, 메쉬 또는 기타 데이터 블록을 공유함.

NLA 에디터에서는 두 개의 독립적인 스트립처럼 보일 수 있지만, 실제로는 **내부적으로 동일한 데이터 블록을 가리키고 있습니다**.
따라서 **NLA Stride를 사용하여 오프셋**을 적용할 때, 애드온이 서로 다른 스트립을 움직이는 것처럼 보여도 실제로는 동일한 데이터 블록을 수정하게 되어 **기대했던 오프셋 효과가 나타나지 않습니다**.


#### ✅ 해결 방법 (아래 스크린샷 참조)

> 💡 **핵심 접근 방식: 오프셋을 적용하기 전에 데이터를 독립적으로 만드십시오.**

단계 (그림 참조):

1. 3D 뷰포트에서 처리할 오브젝트를 선택합니다.
2. **오브젝트(Object) → 관계(Relations)**를 엽니다.
3. **단일 사용자로 만들기(Make Single User)**를 클릭합니다.
4. 독립시켜야 할 데이터 유형(예: 오브젝트 애니메이션)을 선택합니다.
5. 데이터가 독립된 후 **NLA Stride**를 사용하여 오프셋을 적용합니다.



![alt text](images/img_3001.png)

> 데이터가 독립되면 각 오브젝트는 고유한 NLA 데이터를 갖게 됩니다.
> 이제 NLA Stride가 **NLA 스트립을 정상적이고 예측 가능하게 오프셋**할 수 있습니다.
---


#### 2. ⚠️ NLA 일괄 생성

이 애드온은 NLA 스트립을 대상으로 합니다. NLA 스트립으로 "푸시 다운(Push Down)"되지 않은 애니메이션 데이터는 영향을 받지 않습니다.

#### ✅ 해결 방법: NLA 푸시 도구

애드온은 일괄 변환 도구를 제공합니다 (아래 녹색 화살표 표시). 이는 뷰포트 선택이 아닌 **리스트에 있는** 오브젝트에 적용됨에 유의하십시오.

![alt text](images/img_3002.png)

---



## 📖 기타 설명


#### 1. 정렬 및 오프셋 전략 팁

- 3D 뷰포트에서 **Alt + A**를 눌러 모든 선택을 해제한 후, **리스트 오브젝트 선택** 기능을 사용하여 리스트에 어떤 오브젝트가 있는지 정확히 확인할 수 있습니다.
<br>
- **순서**는 매우 중요하며 오프셋 후의 애니메이션 상태에 직접적인 영향을 미칩니다. 가능하다면 이름 규칙(Naming Convention)을 사용하여 순서를 결정하십시오. 오브젝트가 너무 많다면 분할하여 처리하십시오.
<br>
- 상황이 복잡해지면 정렬 도구를 사용하여 먼저 하나로 통일하십시오.
<br>
- 애니메이션 오프셋이 매우 간편해지므로, 하나의 **완벽한 움직임**을 만드는 데 에너지를 집중하십시오.
<br>
- 움직임 디자인에 **위치(Location)** 키가 포함된 경우, 복제 시 애니메이션이 원래 좌표로 점프하여 돌아갈 수 있음에 주의하십시오. 이때 **Ctrl + A**를 사용하여 트랜스폼을 적용하면 새 좌표를 델타 트랜스폼(Delta Transforms) 데이터에 기록할 수 있습니다.
![alt text](images/img_4001.png)
---

#### 2. 오프셋 설명
- 선형 스태킹 모드:  
  - 간편 모드: 
  <a href="images/img_4002.png"><img src="images/img_4002.png" width="650"></a>
  간편 모드는 원래 상태(그림의 왼쪽 끝)를 기준으로 계산됩니다. 오프셋을 100, 스케일을 1.5로 설정하면 마지막 스트립의 시작점과 종료점이 대상과 정확히 일치하게 됩니다. 하지만 감쇠 모드에 따라 중간 스트립의 분포가 달라집니다.

    ---

  - 프로 모드:
  차이점은 프로 모드에서 시작(Head)과 종료(Tail)를 모두 제어할 수 있다는 것입니다. 따라서 두 개의 감쇠 설정이 있습니다.
  <a href="images/img_4003.png"><img src="images/img_4003.png" width="650"></a>
  주의: 시작과 종료의 감쇠 모드가 **다를** 경우 애니메이션 스트립이 너무 짧아지거나 사라질 수 있으므로 주의가 필요합니다.
  <a href="images/img_4004.png"><img src="images/img_4004.png" width="650"></a>

---

#### 3. 리스트 아이콘의 의미

![alt text](images/img_3003.gif)

아이콘 A: 데이터 모드
아이콘 B: Action은 표준 애니메이션 데이터(NLA 아님)를 나타냅니다.
아이콘 C: 사용 가능한 NLA 데이터.

- B와 C의 아이콘 의미는 A열의 데이터 모드에 따라 달라집니다:
  - ✔ : A열 모드와 일치하는 **올바른** 데이터가 포함됨.
  - ・ : 데이터가 포함되어 있으나 A열에서 설정된 유형이 **아님**.
  - ✕ : 데이터를 찾을 수 없음.

뷰포트 내 데이터:
| 항목 | 오브젝트 애니메이션 | 마테리얼 애니메이션 | 쉐이프 키 애니메이션 |
|------|------|------|--------|
| **NLA 스트립** | cube.049 | cube.050 | cube.051 | 
| **활성 액션** | cube.027 | cube.037 | cube.038 |

- 기타: cube.000 (세 가지 유형의 NLA 모두 보유) / cube.039 (애니메이션 데이터 없음).

---

## 🔧 기술 참조

  [Blender NLA 공식 매뉴얼](https://docs.blender.org/manual/en/latest/editors/nla/index.html)

  [Blender API 공식 매뉴얼](https://docs.blender.org/api/current/bpy.ops.nla.html)

  


## 📘 목차

1. [빠른 시작](#-빠른-시작)  
2. [기능 개요](#-기능-개요)      
3. [자주 묻는 질문](#-자주-묻는-질문) 
4. [기타](#-기타) 
5. [기술 참조](#-기술-참조)

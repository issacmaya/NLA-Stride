<a href="images/NLA-Stride_LOGO2.png"><img src="images/NLA-Stride_LOGO2.png" width="250"></a>  

# 사용 설명서

> 이 매뉴얼은 NLA-Stride Blender 애드온의 관련 기능과 팁, 그리고 몇 가지 일반적인 알려진 문제에 대한 답변을 소개합니다.

---

## 📘 목차

1. [빠른 시작](#Quick_Start)  
2. [업데이트 주요 사항](#Version_Updates)
3. [기능 개요](#Feature_Overview)      
4. [자주 묻는 질문](#FAQ) 
5. [기타](#Others) 
6. [기술 참조](#Technical_Reference)

---

## 🚀 빠른 시작
<a id="Quick_Start"></a>

### 1. 애드온 설치

1. Blender 공식 설치 단계를 따르십시오 ( **[일반 설치 가이드](https://docs.blender.org/manual/en/latest/editors/preferences/addons.html)** )

2. 설치 후, Blender 3D 뷰포트의 **사이드바 → 애니메이션** 탭에서 **NLA Stride Tool**을 확인할 수 있습니다. 
<br>![alt text](images/img_1001.png)



---

### 2. 애니메이션이 있는 오브젝트 선택  
<a href="images/img_1002.png">
  <img src="images/img_1002.png" width="650">
</a>  

애니메이션 데이터가 포함된 하나 이상의 오브젝트를 선택합니다. NLA 애니메이션이 아닌 표준 애니메이션인 경우 "NLA 일괄 생성" 설명을 참조하십시오.

---

### 3. 목록에 추가

![alt text](images/img_1003.png)

⚠️ 주의: 애드온은 목록을 기준으로 작동하며, 뷰포트에서의 실시간 오브젝트 선택과는 독립적입니다.

---

### 4. NLA 정렬 / 오프셋 작업


<a href="images/img_1004.png"><img src="images/img_1004.png" width="650"></a>  

<a href="images/img_1005.png"><img src="images/img_1005.png" width="650"></a>  

<a href="images/img_1006.png"><img src="images/img_1006.png" width="650"></a>  


위는 NLA 정렬 및 오프셋 기능의 시연입니다.

---

### 5. 애니메이션의 매력을 즐기십시오

<a href="images/DEMO_01.mp4">
  <img src="images/DEMO_01.gif" width="720">
</a>  

<a href="images/DEMO_02.mp4">
  <img src="images/DEMO_02.gif" width="720">
</a>  

<a href="images/DEM3_03.mp4">
  <img src="images/DEMO_03.gif" width="720">
</a>  

<a href="images/DEM3_04.mp4">
  <img src="images/DEMO_04.gif" width="720">
</a>  

예제 모델을 제공해 주신 대만 브랜드 [SANSUI / 山水](https://www.sansuitw.com/?gad_source=1&gad_campaignid=23085773952&gbraid=0AAAAAoXC59ENhboAZDO-y0zK4yQpidtXM&gclid=CjwKCAiAybfLBhAjEiwAI0mBBscjnZOEYBBY127EypNMfnL1h_Vqm_HACczeJBOqMK-euDJFPb1iAxoC7rkQAvD_BwE)에 감사드립니다.

---
## 🌟 업데이트 주요 사항
<a id="Version_Updates"></a>
  
#### v1.0.0 주요 업데이트
- 목록 내보내기 / 가져오기 / 추가 
  ![alt text](images/v100_001.png)  
  1. 목록 작업에 세 가지 새로운 기능이 추가되었습니다.
  2. 내보내기 및 가져오기는 *.json 파일을 사용합니다.
  3. "추가"는 목록의 맨 끝에 항목을 추가합니다.
  4. 이름이 중복되는 경우 기존 항목이 우선됩니다.
#### v0.9.8 주요 업데이트  
- 최초 공개 버전  
---
## 🧰 기능 개요
<a id="Feature_Overview"></a>
 

#### 1. 애니메이션 소스 

![alt text](images/img_2001.png)

- A : 초기화 후 선택 추가    
  현재 목록 데이터를 지우고 장면(Scene)에서 선택된 오브젝트를 추가합니다.  
  <br>
- B : 목록 비우기  
  목록 내의 모든 데이터를 삭제합니다.  
  <br>
- C : 애니메이션 소스  
    현재 세 가지 유형을 지원합니다:  
    -  오브젝트 애니메이션  
    -  쉐이프 키 애니메이션  
    -  마テリアル(재질) 애니메이션
  <br>
- D : 목록 오브젝트 추가 / 제거  
  추가 시 목록을 **지우지 않으며**, 오브젝트는 **선택 순서에 따라** 맨 뒤에 추가됩니다. 이미 목록에 있는 오브젝트를 선택하면 맨 뒤로 이동합니다. 이는 방법 A와 다릅니다. 제거 또한 1-J와 다릅니다.  
  <br>

- E : 목록 작업 (드롭다운 메뉴)  
  자세한 내용은 [1-1 목록 작업](#List_Functions)을 참조하십시오.
  <br>

- F : 선택 항목 위로 / 아래로 이동  
  수동으로 순서를 조정합니다. 순서가 수동으로 변경되면 **"캐시된 원본 순서"**로 정의됩니다.
  <br>

- G : NLA로 푸시 (드롭다운 메뉴)  
  목록의 오브젝트만 NLA 스트립으로 변환합니다.
  <br>  
  
-  PS. [3. 목록 아이콘의 의미](#List_Icon_Meanings)

#### 1-1. 목록 작업
<a id="List_Functions"></a>

![alt text](images/img_2002.png)

- H : 초기화 후 선택 추가   
  목록 데이터를 지우고 장면에서 선택된 오브젝트를 추가합니다.
  <br>

- I : 네 가지 정렬 상태    
  가장 중요한 것은 애드온이 기록하는 **원본 순서**입니다. 나머지 세 개는 임시 정렬 상태입니다.
  <br>

- J : 장면 선택 제거   
  3D 장면에서 현재 선택된 오브젝트를 목록에서 제거합니다 (1-D와 다름).
  <br>

#### 2. 오프셋 스트립 지정

![alt text](images/img_2003.png)

- K : 세 가지 스트립 모드  
  - 단일 스트립 : 특정 스트립 하나만 대상으로 합니다.
  - 단일 트랙 : 한 트랙의 모든 스트립을 하나의 단위로 취급합니다 (상대적 위치 유지).
  - 모든 트랙 : 오브젝트의 모든 트랙이 함께 변경됩니다 (상대적 위치 유지).
  <br>

- L : 세 가지 로케이터  
  - 해당 슬롯 : 재질 모드 전용으로, NLA UI에서 **위에서 아래로** 계산됩니다.
  - 해당 트랙 : NLA UI에서 **아래에서 위로** 계산됩니다.
  - 해당 스트립 : NLA UI에서 **왼쪽에서 오른쪽으로** 계산됩니다.
  <br>

  **!! 주의: 대상을 정확히 지정하지 않으면 NLA 오프셋을 실행할 수 없습니다.**

#### 3. NLA 정렬 도구 (초기화 값)
![alt text](images/img_2004.png)

- M : 다섯 가지 정렬 모드  
  - 최대 시작 프레임 기준 : 목록 내 스트립 중 가장 **늦은** 시작 지점을 기준으로 합니다.
  - 최소 시작 프레임 기준 : 목록 내 스트립 중 가장 **빠른** 시작 지점을 기준으로 합니다 (자주 사용).
  - 최대 종료 프레임 기준 : 목록 내 스트립 중 가장 **늦은** 종료 지점을 기준으로 합니다 (자주 사용).
  - 최소 종료 프레임 기준 : 목록 내 스트립 중 가장 **빠른** 종료 지점을 기준으로 합니다.
  - 현재 시간 기준 : 현재 재생 헤드 위치를 기준으로 합니다 (가장 많이 사용).
  <br>

- N : 세 가지 정렬 방법  
  - 시작 정렬 : 왼쪽을 대상에 맞춥니다 (시작 지점 정렬에 자주 사용).
  - 중앙 정렬 : 중앙을 대상에 맞춥니다.
  - 종료 정렬 : 오른쪽을 대상에 맞춥니다 (종료 지점 정렬에 자주 사용).
  <br>

- O : 스케일 초기화  
  목록 내 모든 NLA 스트립의 스케일 값을 1로 되돌립니다.
  <br>


#### 4. 간편 모드

![alt text](images/img_2005.png)  
- P : 간편 모드 감쇠 [(상세 설명)](#Stride_Description)  
  오프셋 계산 공식은 4가지입니다: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
  <br>

- Q : 오프셋 양 (단위: **프레임**)  
  목록의 첫 번째 오브젝트와 마지막 오브젝트 사이의 총 차이입니다 (음수 입력 가능).
  <br>

- R : 스케일  
  목록의 첫 번째 오브젝트와 마지막 오브젝트 사이의 스케일 차이입니다 (0 ~ 1).
  <br>

- S : 간편 NLA Stride 실행 (클릭을 반복하면 계산이 누적됩니다).
  <br>

#### 5. 전문가 모드
![alt text](images/img_2006.png)  
  **>> 이 애드온의 핵심: 간단한 설정으로 스트립의 오프셋과 스케일이 자동으로 조정됩니다 <<**

- T : 프로 시작 감쇠 [(상세 설명)](#Stride_Description)  
  계산 공식은 4가지: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
  <br>

- U : 시작 프레임 설정  
  목록 내 모든 오브젝트 애니메이션의 전체적인 **시작** 시간을 설정합니다.
  <br>

- V : 오프셋 비율 (시작)    
  시작 감쇠 (T)를 곱한 오프셋 양으로, 모든 스트립의 시작점을 자동 설정합니다.
  <br>

- W : 프로 종료 감쇠 [(상세 설명)](#Stride_Description)    
  계산 공식은 4가지: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
  <br>

- X : 종료 프레임 설정    
  목록 내 모든 오브젝트 애니메이션의 전체적인 **종료** 시간을 설정합니다.
  <br>

- Y : 오프셋 비율 (종료)    
  첫 번째와 마지막 오브젝트 사이의 차이입니다 (음수 입력 가능).
  <br>

- Z : 전문가 NLA Stride 실행 (클릭을 반복해도 계산이 **누적되지 않습니다**).
  <br>


---

## ❓ 자주 묻는 질문
<a id="FAQ"></a>


#### 1. ⚠️ 「인스턴스 데이터 (Instanced Data)」의 세부 사항에 주의

본 애드온은 NLA 스트립(Strips) 자체의 오프셋 및 정렬 처리를 주로 대상으로 하며,  
Blender의 「인스턴스 데이터」 관계를 **자동으로 처리하지 않습니다**.

#### 인스턴스 데이터란 무엇입니까?

**여러 오브젝트가 동일한 데이터 블록을 공유**할 때, 해당 데이터는 「인스턴스(Instanced)」된 것입니다.

- 예:  
  - 두 오브젝트가 동일한 재질(Material)을 공유하는 경우.  
  - 동일한 액션(애니메이션), 메시 또는 기타 데이터 블록을 공유하는 경우.  

NLA 에디터에서는 독립된 스트립처럼 보이지만, 실제로는 **동일한 기본 데이터를 가리키고 있습니다**.
결과적으로, **NLA Stride를 사용하여 오프셋**을 적용할 때 스트립은 이동하는 것처럼 보이지만 여전히 동일한 데이터에 영향을 미치므로 **의도한 오프셋 효과를 얻을 수 없습니다**.


#### ✅ 해결 방법 (아래 단계를 따르십시오)

> 💡 **핵심 방법: 오프셋을 적용하기 전에 데이터를 개별화(Single User)하십시오.**

단계 (그림 참조):

1. 3D 뷰포트에서 처리할 오브젝트를 선택합니다.  
2. **오브젝트(Object) → 관계(Relations)**로 이동합니다.  
3. **단일 사용자로 만들기(Make Single User)**를 클릭합니다.  
4. 필요에 따라 개별화할 데이터 유형(예: 오브젝트 애니메이션)을 선택합니다.
5. 데이터가 독립된 것을 확인한 후 **NLA Stride**를 사용하여 오프셋을 진행합니다.  



![alt text](images/img_3001.png)

> 데이터가 독립되면 각 오브젝트는 「진정으로 독립된 NLA 데이터」를 갖게 됩니다.
> 이제 NLA Stride가 **정상적이고 예측 가능하게 스트립을 이동**시킬 수 있습니다.
---


#### 2. ⚠️ NLA 일괄 생성

본 애드온은 NLA 스트립에 대해 작동합니다. NLA에 푸시되지 않은 표준 애니메이션(활성 액션)은 변경되지 않습니다.

#### ✅ 해결 방법: 일괄 변환 도구

애드온은 목록 내의 오브젝트를 한 번에 NLA로 변환하는 도구를 제공합니다 (아래 녹색 화살표). 주의: 3D 선택이 아닌 **목록 내**의 오브젝트에 적용됩니다.

![alt text](images/img_3002.png)

---



## 📖 기타 설명
<a id="Others"></a>


#### 1. 정렬 및 오프셋 전략 팁

- 3D 뷰포트에서 **Alt A**를 눌러 모든 선택을 해제한 다음, **「목록 오브젝트 선택」** 기능을 사용하여 목록에 무엇이 포함되어 있는지 확인하십시오.  
<br>

- **순서**는 오프셋 후의 애니메이션 상태에 직접적인 영향을 미치므로 매우 중요합니다. 가능하면 이름을 사용하여 순서를 결정하십시오. 오브젝트가 매우 많은 경우 분할하여 처리하는 것이 좋습니다.  
<br>

- 상황이 혼란스러워지면 정렬 도구를 사용하여 모든 것을 다시 동기화하십시오.  
<br>

- 애니메이션 오프셋이 매우 쉬워졌으므로 하나의 **완벽한 움직임**을 만드는 데 집중하십시오.  
<br>

- 모션 디자인 시: **위치(Location)** 값이 키프레임되어 있는 경우, 복사하여 재생할 때 오브젝트가 기록된 좌표로 점프할 수 있습니다. 이 경우 **Ctrl A** (변환 적용) 기능을 사용하여 새로운 위치를 **델타 트랜스폼(Delta Transform)** 데이터에 기록하십시오.  
  <br>![alt text](images/img_4001.png)  

---

#### 2. Stride 설명
<a id="Stride_Description"></a>

- 선형 중첩 모드:  
  - 간편 모드:   
  <a href="images/img_4002.png"><img src="images/img_4002.png" width="650"></a>  
  간편 모드는 원래 상태(이미지 가장 왼쪽)를 기준으로 계산됩니다. 예를 들어 오프셋 100, 스케일 1.5로 설정한 경우, 마지막 스트립의 시작점과 길이는 항상 동일합니다. 하지만 감쇠 모드에 따라 중간 스트립들의 시작점이 달라져 서로 다른 오프셋 "느낌"을 줍니다.

    ---
  - 전문가 모드:    
  <a href="images/img_4003.png"><img src="images/img_4003.png" width="650"></a>  
  간편 모드와 달리 전문가 모드는 시작과 끝을 각각 제어할 수 있으므로, 각각에 대해 별도의 감쇠 모드를 설정할 수 있습니다.  
  
    ---
  - **주의**:   
  <a href="images/img_4004.png"><img src="images/img_4004.png" width="650"></a>  
  시작과 끝의 감쇠 모드가 **서로 다른** 경우, 애니메이션 스트립이 너무 짧아지거나 사라지지 않는지 주의해야 합니다.
---

#### 3. 목록 아이콘의 의미
<a id="List_Icon_Meanings"></a>

![alt text](images/img_3003.gif)

그림 A : 데이터 모드
그림 B : Action은 일반 애니메이션 데이터(비 NLA)를 나타냅니다
그림 C : 사용 가능한 NLA 데이터

- B와 C의 기호 의미는 A열에서 선택한 데이터 모드에 따라 달라집니다:
  - ✔ : A열 설정과 일치하는 **정확한** 데이터가 있음.
  - ・ : 데이터는 있지만 A열에 설정된 유형이 **아님**.
  - ✕ : 데이터 없음.

예시 데이터:
| 항목 | 오브젝트 애니메이션 | 재질 애니메이션 | 쉐이프 키 애니메이션 |
|------|------|------|--------|
| **NLA 스트립** | cube.049 | cube.050 | cube.051 | 
| **활성 액션** | cube.027 | cube.037 | cube.038 | 

- 기타: cube.000 (3가지 유형의 NLA 모두 보유) / cube.039 (애니메이션 데이터 전혀 없음)

---




## 🔧 기술 참조
<a id="Technical_Reference"></a>

  [Blender NLA 공식 매뉴얼](https://docs.blender.org/manual/en/latest/editors/nla/index.html)

  [Blender API 공식 매뉴얼](https://docs.blender.org/api/current/bpy.ops.nla.html)

  


## 📘 목차

1. [빠른 시작](#Quick_Start) 
2. [업데이트 주요 사항](#Version_Updates) 
3. [기능 개요](#Feature_Overview)      
4. [자주 묻는 질문](#FAQ) 
5. [기타](#Others) 
6. [기술 참조](#Technical_Reference)
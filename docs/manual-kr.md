<a href="images/NLA-Stride_LOGO2.png"><img src="images/NLA-Stride_LOGO2.png" width="250"></a>  

# 사용자 매뉴얼 (한국어)

> 이 매뉴얼은 NLA-Stride Blender 애드온의 기능과 팁을 소개하며, 몇 가지 알려진 문제에 대한 답변을 제공합니다.

---

## 📘 목차

1. [빠른 시작](#-빠른-시작)  
2. [버전 업데이트 중점](#-버전-업데이트-중점)
3. [기능 개요](#-기능-개요)      
4. [자주 묻는 질문](#-자주-묻는-질문) 
5. [기타 팁](#-기타-팁) 
6. [기술 참고](#-기술-참고)

---

## 🚀 빠른 시작

### 1. 애드온 설치

1. Blender 공식 설치 단계를 따르십시오 ( **[일반 설치 가이드](https://docs.blender.org/manual/en/latest/editors/preferences/addons.html)** )

2. 설치 후, Blender 3D 뷰포트의 **사이드바 → 애니메이션** 탭에서 **NLA Stride Tool**을 찾을 수 있습니다. 
<br>![alt text](images/img_1001.png)



---

### 2. 애니메이션이 있는 오브젝트 선택  
<a href="images/img_1002.png">
  <img src="images/img_1002.png" width="650">
</a>  

애니메이션 데이터를 포함하는 하나 이상의 오브젝트를 선택합니다. NLA 스트립 대신 일반 애니메이션을 사용하는 경우 "NLA로 일괄 푸시" 지침을 참조하십시오.

---

### 3. 리스트에 추가

![alt text](images/img_1003.png)

⚠️ 참고: 애드온은 현재 씬에서 선택된 오브젝트와 상관없이 리스트를 기반으로 작동합니다.

---

### 4. NLA 정렬 / 오프셋 작업


<a href="images/img_1004.png"><img src="images/img_1004.png" width="650"></a>  

<a href="images/img_1005.png"><img src="images/img_1005.png" width="650"></a>  

<a href="images/img_1006.png"><img src="images/img_1006.png" width="650"></a>  


위의 다이어그램은 NLA 정렬 및 오프셋 기능을 보여줍니다.

---

### 5. 애니메이션 즐기기

<a href="images/DEMO_01.mp4">
  <img src="images/DEMO_01.gif" width="720">
</a>  

<a href="images/DEMO_02.mp4">
  <img src="images/DEMO_02.gif" width="720">
</a>  

<a href="images/DEM3_03.mp4">
  <img src="images/DEMO_03.gif" width="720">
</a>  

<a href="images/DEM3_04.mp4">
  <img src="images/DEMO_04.gif" width="720">
</a>  

예제 모델 제공: [SANSUI Taiwan](https://www.sansuitw.com/?gad_source=1&gad_campaignid=23085773952&gbraid=0AAAAAoXC59ENhboAZDO-y0zK4yQpidtXM&gclid=CjwKCAiAybfLBhAjEiwAI0mBBscjnZOEYBBY127EypNMfnL1h_Vqm_HACczeJBOqMK-euDJFPb1iAxoC7rkQAvD_BwE)

---
## 🌟 버전 업데이트 중점
#### v1.0.0 주요 내용
- 리스트 내보내기 / 가져오기 / 추가  
  ![alt text](images/v100_001.png)  
  1. 리스트 작업 내에 세 가지 기능이 추가되었습니다.
  2. 내보내기 및 가져오기는 *.json 형식을 사용합니다.
  3. "추가"는 리스트 끝에 항목을 추가합니다.
  4. 이름이 중복되는 경우, 처음 발견된 항목이 우선순위를 갖습니다.
#### v0.9.8 주요 내용  
- 첫 공식 출시  
---
## 🧰 기능 개요

#### 1. 리스트 초기화 툴 

![alt text](images/img_2001.png)

- A : 초기화 및 선택 항목 추가    
  리스트 데이터를 지운 다음 현재 씬에서 선택된 오브젝트를 추가합니다.
  <br>
- B : 리스트 비우기  
  리스트 내의 모든 데이터를 삭제합니다.
  <br>
- C : 애니메이션 소스  
    현재 세 가지 유형을 지원합니다:
    - 오브젝트 애니메이션  
    - 쉐이프 키 애니메이션  
    - 머티리얼 애니메이션
  <br>
- D : 리스트에 오브젝트 추가 / 제거  
  추가 시 기존 항목을 **지우지 않으며**, 오브젝트는 **선택 순서대로** 끝에 추가됩니다. 여기서의 제거는 1-J와 다릅니다.
  <br>

- E : 리스트 작업 (드롭다운 메뉴)  
  자세한 내용은 [1-1 리스트 작업](#1-1-리스트-작업)을 참조하십시오.
  <br>

- F : 선택 항목 위로 / 아래로 이동  
  수동으로 정렬을 조정합니다. 순서가 조정되면 그 결과는 **"원래 순서"**로 정의됩니다.
  <br>

- G : NLA로 애니메이션 푸시 (드롭다운 메뉴)  
  리스트에 있는 오브젝트의 애니메이션만 NLA 스트립으로 변환합니다.
  <br>  
  
-  PS. [3. 리스트 아이콘 범례](#3-리스트-아이콘-범례)

#### 1-1. 리스트 작업

![alt text](images/img_2002.png)

- H : 초기화 및 선택 항목 추가   
  리스트 데이터를 지우고 현재 선택된 오브젝트를 추가합니다.
  <br>

- I : 정렬 모드    
  **원래 순서**(애드온이 추적함)와 다른 세 가지 정렬 방법이 포함됩니다.
  <br>

- J : 씬 선택 항목 제거   
  현재 씬에서 선택된 오브젝트를 리스트에서 제거합니다.
  <br>

#### 2. 오프셋 스트립 지정

![alt text](images/img_2003.png)

- K : 스트립 모드  
  - 단일 스트립: 특정 스트립 하나만 대상으로 합니다.
  - 단일 트랙: 한 트랙의 모든 스트립을 하나의 단위로 취급합니다(상대적 위치 유지).
  - 모든 트랙: 오브젝트의 모든 트랙이 함께 변경됩니다(상대적 위치 유지).
  <br>

- L : 슬롯/트랙/스트립 위치 지정  
  - 슬롯: 머티리얼 모드 전용이며, 인터페이스에서 **위에서 아래로** 계산됩니다.
  - 트랙: NLA 에디터에서 **아래에서 위로** 계산됩니다.
  - 스트립: NLA 에디터에서 **왼쪽에서 오른쪽으로** 계산됩니다.
  <br>

  **!! 참고: 대상이 올바르게 지정되지 않으면 NLA Stride가 작동할 수 없습니다.**

#### 3. NLA 정렬 툴 (초기값)
![alt text](images/img_2004.png)

- M : 정렬 모드 대상  
  - 최대 시작 프레임 기준: 리스트에서 가장 **늦게** 시작하는 스트립의 **시작점**에 맞춥니다.
  - 최소 시작 프레임 기준: 리스트에서 가장 **빨리** 시작하는 스트립의 **시작점**에 맞춥니다 (일반적).
  - 최대 종료 프레임 기준: 리스트에서 가장 **늦게** 끝나는 스트립의 **끝점**에 맞춥니다 (일반적).
  - 최소 종료 프레임 기준: 리스트에서 가장 **빨리** 끝나는 스트립의 **끝점**에 맞춥니다.
  - 현재 시간 기준: 현재 재생 헤드 위치에 맞춥니다 (가장 일반적).
  <br>

- N : 정렬 위치  
  - 시작점에 맞춤: 왼쪽 끝을 대상에 맞춥니다.
  - 중간점에 맞춤: 중앙을 대상에 맞춥니다.
  - 끝점에 맞춤: 오른쪽 끝을 대상에 맞춥니다.
  <br>

- O : 스케일 초기화  
  리스트에 지정된 모든 NLA 스트립의 스케일을 1로 초기화합니다.
  <br>


#### 4. 간편 모드

![alt text](images/img_2005.png)  
- P : 감쇠 모드 (Falloff) [(상세 설명)](#2-오프셋-설명)  
  네 가지 계산식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.
  <br>

- Q : 오프셋 양 (단위: **프레임**)  
  스트립 사이의 등간격 간격이 아니라, 리스트의 첫 번째 오브젝트와 마지막 오브젝트 사이의 총 차이입니다 (음수 값 가능).
  <br>

- R : 스케일  
  등간격 스케일링이 아니라, 첫 번째와 마지막 오브젝트 사이의 스케일 차이입니다 (0 ~ 1).
  <br>

- S : 간편 NLA 스트라이드 실행 (반복해서 누르면 값이 누적됩니다).
  <br>

#### 5. 전문가 모드
![alt text](images/img_2006.png)  
  **>> 핵심 기능: 시작점과 끝점을 정의하면 스트립이 자동으로 오프셋 및 스케일링됩니다. <<**

- T : 프로 시작 감쇠 [(상세 설명)](#2-오프셋-설명)  
  오프셋 계산식: 선형, 이즈 인, 이즈 아웃 또는 이즈 인 아웃.
  <br>

- U : 시작 프레임 설정  
  리스트에 있는 전체 애니메이션 시퀀스의 글로벌 **시작** 시간을 설정합니다.
  <br>

- V : 오프셋 비율  
  오프셋 양에 감쇠 모드(T)를 곱한 값으로, 시작 프레임 위치를 자동화하는 데 사용됩니다.
  <br>

- W : 프로 종료 감쇠 [(상세 설명)](#2-오프셋-설명)    
  오프셋 계산식: 선형, 이즈 인, 이즈 아웃 또는 이즈 인 아웃.
  <br>

- X : 종료 프레임 설정    
  리스트에 있는 전체 애니메이션 시퀀스의 글로벌 **종료** 시간을 설정합니다.
  <br>

- Y : 오프셋 비율    
  첫 번째와 마지막 오브젝트의 종료 프레임 차이입니다 (음수 값 가능).
  <br>

- Z : 전문가 NLA 스트라이드 실행 (값이 누적되지 **않습니다**).
  <br>


---

## ❓ 자주 묻는 질문


#### 1. ⚠️ "인스턴스 데이터 (Instanced Data)" 상세 주의사항

이 애드온은 오프셋 및 정렬을 위해 NLA 스트립 자체를 대상으로 하며,  
Blender의 "인스턴스 데이터" 관계를 자동으로 처리하지 **않습니다**.

#### 인스턴스 데이터란 무엇입니까?

**여러 오브젝트가 동일한 데이터 블록을 공유**할 때 해당 데이터는 "인스턴스화"됩니다.

- 예:  
  - 두 오브젝트가 동일한 머티리얼을 공유함.  
  - 동일한 액션, 메쉬 또는 기타 데이터 블록을 공유함.  

NLA 에디터에서는 두 개의 독립적인 스트립처럼 보이지만, **내부적으로는 동일한 데이터를 가리킵니다**.
결과적으로 **NLA Stride를 사용하여 오프셋**할 때 애드온은 스트립을 이동시키지만, 동일한 하위 데이터에 영향을 미치기 때문에 **예상한 오프셋 효과를 얻을 수 없습니다**.


#### ✅ 해결 방법 (아래 스크린샷 참조)

> 💡 **핵심 습관: 오프셋하기 전에 데이터를 독립적으로 만들기**

단계:

1. 3D 뷰포트에서 오브젝트를 선택합니다.  
2. **오브젝트(Object) → 관계(Relations)**로 이동합니다.  
3. **단일 사용자로 만들기(Make Single User)**를 클릭합니다.  
4. 독립적이어야 하는 데이터 유형을 선택합니다.
5. 데이터가 독립되면 **NLA Stride**를 사용하여 오프셋합니다.  



![alt text](images/img_3001.png)

> 데이터가 독립되면 각 오브젝트는 고유한 "진정으로 유일한 NLA 데이터"를 갖게 됩니다.
> 이제 NLA Stride는 **NLA 스트립을 정상적이고 예측 가능하게 오프셋**할 수 있습니다.
---


#### 2. ⚠️ NLA로 일괄 푸시

이 애드온은 구체적으로 NLA 스트립에서 작동합니다. NLA로 푸시되지 않은 애니메이션 데이터는 영향을 받지 않습니다.

#### ✅ 해결 방법: 일괄 변환 툴

애드온은 **리스트에 있는** 모든 오브젝트의 애니메이션을 NLA로 푸시하는 툴을 제공합니다 (아래 녹색 화살표). 참고: 이것은 3D 선택이 아니라 리스트를 대상으로 합니다.

![alt text](images/img_3002.png)

---



## 📖 기타 팁


#### 1. 정렬 및 오프셋 전략

- 3D 뷰포트에서 **Alt A**를 눌러 모두 선택 해제한 다음, **리스트 오브젝트 선택** 기능을 사용하여 리스트에 정확히 어떤 오브젝트가 있는지 확인할 수 있습니다.  
<br>

- **순서**는 매우 중요하며(오프셋 결과에 직접적인 영향을 미침), 이름을 사용하여 순서를 결정하는 것이 좋습니다. 오브젝트가 많은 경우 배취(Batch)로 처리하십시오.  
<br>

- 상황이 복잡해지면 정렬 툴을 사용하여 모든 것을 통합된 시작점으로 재설정하십시오.  
<br>

- 오프셋이 쉬워지므로 먼저 하나의 **완벽한 동적 움직임**을 만드는 데 집중하십시오.  
<br>

- 애니메이션에 **위치(Location)**가 포함된 경우 복제본이 동일한 위치로 돌아갈 수 있습니다. **Ctrl A**를 사용하여 변환을 **델타 트랜스폼(Delta Transform)** 데이터에 적용하십시오.  
  <br>![alt text](images/img_4001.png)  

---

#### 2. 오프셋 설명
- 선형 감쇠 모드:  
  - 간편 모드:   
  <a href="images/img_4002.png"><img src="images/img_4002.png" width="650"></a>  
  간편 모드는 원래 상태(왼쪽)를 기준으로 계산합니다. 예: 오프셋 100, 스케일 1.5. 마지막 스트립의 시작점과 길이는 설정과 일치하지만 중간 스트립은 감쇠 모드에 따라 달라집니다.

    ---
  - 전문가 모드:    
  <a href="images/img_4003.png"><img src="images/img_4003.png" width="650"></a>  
  간편 모드와 달리 전문가 모드는 시작(Head)과 끝(Tail)을 모두 제어하며 각각에 대해 별도의 감쇠 모드를 설정할 수 있습니다.  
  
    ---
  - **참고**:   
  <a href="images/img_4004.png"><img src="images/img_4004.png" width="650"></a>  
  시작과 끝의 감쇠 모드가 **서로 다른** 경우 스트립이 너무 짧아지거나 사라지지 않도록 주의하십시오.
---

#### 3. 리스트 아이콘 범례

![alt text](images/img_3003.gif)

아이콘 A: 애니메이션 소스 모드
아이콘 B: 액션(Action)은 일반 애니메이션 데이터를 나타냄 (아직 NLA에 없음)
아이콘 C: 사용 가능한 NLA 데이터

- B와 C의 기호는 소스 모드(A)에 따라 변경됩니다:
  - ✔ : 모드 A와 일치하는 **올바른** 데이터가 있음.
  - ・ : 데이터가 있지만 모드 A와 일치하지 **않음**.
  - ✕ : 데이터를 찾을 수 없음.

예제의 데이터:
| 항목 | 오브젝트 애니 | 머티리얼 애니 | 쉐이프 키 애니 |
|------|------|------|--------|
| **NLA 스트립** | cube.049 | cube.050 | cube.051 | 
| **활성 액션** | cube.027 | cube.037 | cube.038 | 

- 기타: cube.000 (3가지 유형 모두 NLA 있음) / cube.039 (애니메이션 데이터 전혀 없음)

---




## 🔧 기술 참고

  [Blender NLA 공식 매뉴얼](https://docs.blender.org/manual/en/latest/editors/nla/index.html)

  [Blender API 공식 매뉴얼](https://docs.blender.org/api/current/bpy.ops.nla.html)

  


## 📘 목차

1. [빠른 시작](#-빠른-시작) 
2. [버전 업데이트 중점](#-버전-업데이트-중점) 
3. [기능 개요](#-기능-개요)      
4. [자주 묻는 질문](#-자주-묻는-질문) 
5. [기타 팁](#-기타-팁) 
6. [기술 참고](#-기술-참고)
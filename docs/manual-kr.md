<a href="images/NLA-Stride_LOGO2.png"><img src="images/NLA-Stride_LOGO2.png" width="250"></a>  

# 사용 설명서 (한국어)

> 본 설명서는 NLA-Stride Blender 애드온의 관련 기능과 팁, 그리고 몇 가지 자주 묻는 질문에 대한 답변을 소개합니다.

---

## 📘 목차

1. [빠른 시작](#-빠른-시작)  
2. [기능 총괄](#-기능-총괄)      
3. [자주 묻는 질문](#-자주-묻는-질문) 
4. [기타](#-기타) 
5. [기술 참조](#-기술-참조)

---

## 🚀 빠른 시작

### 1. 애드온 설치

1. Blender 공식 설치 단계를 따르십시오 ( **[일반 설치 가이드](https://docs.blender.org/manual/en/latest/editors/preferences/addons.html)** )

2. 설치 후, Blender 3D 뷰포트의 **사이드바 → 애니메이션** 탭에서 **NLA Stride Tool**을 확인할 수 있습니다. 
<br>![alt text](images/img_1001.png)



---

### 2. 애니메이션이 있는 오브젝트 선택  
<a href="images/img_1002.png">
  <img src="images/img_1002.png" width="650">
</a>  

애니메이션 데이터를 포함하는 하나 이상의 오브젝트를 선택합니다. NLA 스트립이 아닌 일반 액션(Action)이 포함된 경우, 후술할 "NLA로 일괄 푸시" 섹션을 참조하십시오.  

---

### 3. 리스트에 추가  
![alt text](images/img_1003.png)  

⚠️ 주의: 애드온은 현재 뷰포트 선택과 관계없이 리스트를 기준으로 작동합니다.  

---

### 4. NLA 정렬 / 오프셋 관련 조작  
<a href="images/img_1004.png"><img src="images/img_1004.png" width="650"></a>  
<a href="images/img_1005.png"><img src="images/img_1005.png" width="650"></a>  
<a href="images/img_1006.png"><img src="images/img_1006.png" width="650"></a>  

이상은 NLA 정렬 및 오프셋 기능의 데모입니다.  

---

### 5. 애니메이션의 마법을 즐기세요  
<a href="images/DEMO_01.mp4">
  <img src="images/DEMO_01.gif" width="720">
</a>  
<a href="images/DEMO_02.mp4">
  <img src="images/DEMO_02.gif" width="720">
</a>  
<a href="images/DEM3_03.mp4">
  <img src="images/DEMO_03.gif" width="720">
</a>  
<a href="images/DEM3_04.mp4">
  <img src="images/DEMO_04.gif" width="720">
</a>  

예제 모델을 제공해주신 대만 브랜드 [SANSUI / 山水](https://www.sansuitw.com/?gad_source=1&gad_campaignid=23085773952&gbraid=0AAAAAoXC59ENhboAZDO-y0zK4yQpidtXM&gclid=CjwKCAiAybfLBhAjEiwAI0mBBscjnZOEYBBY127EypNMfnL1h_Vqm_HACczeJBOqMK-euDJFPb1iAxoC7rkQAvD_BwE)에 감사드립니다.  

---

## 🧰 기능 총괄

#### 1. 데이터 소스 
![alt text](images/img_2001.png)  

- A : 초기화 및 선택 항목 추가  
  리스트를 먼저 비운 후, 현재 장면에서 선택된 오브젝트를 추가합니다.  
<br>

- B : 리스트 비우기  
  리스트 내의 모든 데이터를 삭제합니다.  
<br>

- C : 애니메이션 소스  
  현재 세 가지 유형을 지원합니다: 오브젝트 애니메이션 / 쉐이프 키 애니메이션 / 마테리얼 애니메이션.  
<br>

- D : 리스트 항목 추가 / 삭제  
  추가 시 기존 항목을 **비우지 않으며**, 오브젝트는 **선택한 순서**대로 끝에 추가됩니다. 이미 리스트에 있는 오브젝트를 선택하면 순서가 마지막으로 이동합니다. 추가 로직은 A와 다릅니다. 삭제 도구 또한 1-J와 다릅니다.  
<br>

- E : 리스트 조작 (드롭다운 메뉴)  
  자세한 내용은 「1-1 리스트 조작」을 참조하십시오.  
<br>

- F : 리스트 항목 위로 / 아래로 이동  
  순서를 수동으로 조정합니다. 수동으로 조정된 결과는 **「원래 순서」**로 정의됩니다.  
<br>

- G : NLA로 푸시 (드롭다운 메뉴)  
  리스트 내의 오브젝트에 대해서만 현재 액션을 NLA 스트립으로 변환합니다.  
<br>

- PS. [3. 리스트 아이콘의 의미](#3-리스트-아이콘의-의미)  

#### 1-1. 리스트 조작
![alt text](images/img_2002.png)  

- H : 초기화 및 선택 항목 추가  
  리스트를 먼저 비운 후, 현재 장면에서 선택된 오브젝트를 추가합니다.  
<br>

- I : 네 가지 정렬 방식  
  가장 중요한 것은 **원래 순서로 복구**입니다. 이 애드온은 이 시퀀스를 기록합니다. 나머지 세 가지는 자동 정렬입니다.  
<br>

- J : 장면 선택 항목 제거  
  현재 뷰포트 선택을 기준으로 리스트에서 오브젝트를 제거합니다. 이는 1-D의 삭제 도구와 다릅니다.  

#### 2. 데이터 위치 지정
![alt text](images/img_2003.png)  

- K : 세 가지 스트립 모드  
  - 단일 스트립 : 특정 단일 스트립만 대상으로 합니다.  
  - 단일 트랙 : 동일한 트랙 상의 모든 스트립을 하나의 그룹으로 취급합니다 (상대적 위치 유지).  
  - 모든 트랙 : 해당 오브젝트의 모든 트랙을 동시에 변경하는 것과 같습니다 (상대적 위치 유지).  
<br>

- L : 세 가지 위치 지정 기준  
  - 어느 슬롯 : (마테리얼 모드 전용) UI 상에서 **위에서 아래로** 계산됩니다.  
  - 어느 트랙 : NLA 에디터에서 **아래에서 위로** 계산됩니다.  
  - 어느 스트립 : NLA 에디터에서 **왼쪽에서 오른쪽으로** 계산됩니다.  
<br>

  **!! 주의: 대상 지정이 올바르지 않으면 NLA Stride는 오프셋을 수행할 수 없습니다.** #### 3. NLA 정렬 툴 (초기화 값)
![alt text](images/img_2004.png)  

- M : 다섯 가지 정렬 대상  
  - 최대 시작 프레임 기준 : 리스트에서 가장 **늦게** 시작하는 스트립의 **시작점**을 기준으로 합니다.  
  - 최소 시작 프레임 기준 : 리스트에서 가장 **빨리** 시작하는 스트립의 **시작점**을 기준으로 합니다 (자주 사용).  
  - 최대 종료 프레임 기준 : 리스트에서 가장 **늦게** 끝나는 스트립의 **종료점**을 기준으로 합니다 (자주 사용).  
  - 최소 종료 프레임 기준 : 리스트에서 가장 **빨리** 끝나는 스트립의 **종료점**을 기준으로 합니다.  
  - 현재 시간 기준 : 현재 재생 헤드 위치를 기준으로 합니다 (가장 흔히 사용).  
<br>

- N : 세 가지 정렬 모드  
  - 시작점에 맞춤 : 스트립의 왼쪽을 대상에 맞춥니다. 보통 **시작** 정렬에 사용됩니다.  
  - 중간점에 맞춤 : 스트립의 중앙을 대상에 맞춥니다.  
  - 끝점에 맞춤 : 스트립의 오른쪽을 대상에 맞춥니다. 보통 **종료** 정렬에 사용됩니다.  
<br>

- O : 스케일 초기화  
  리스트 내의 모든 NLA 스트립 스케일 값을 1.0으로 복원합니다.  


#### 4. 간편 모드
![alt text](images/img_2005.png)  

- P : 감쇠 모드 [( 상세 설명 )](#2-오프셋-설명)  
  - 네 가지 계산 공식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.  
<br>

- Q : 오프셋 양 ( 단위: **프레임** )  
  - 개별 스트립 간의 간격이 아니라, 리스트의 첫 번째와 마지막 오브젝트 간의 총 차이입니다 (음수 가능).  
<br>

- R : 스케일  
  - 증분 스케일이 아니라, 리스트의 첫 번째와 마지막 오브젝트 간의 스케일 차이 ( 0 ~ 1 )입니다.  
<br>

- S : 간편 NLA 스트라이드 실행 (반복 클릭 시 계산이 누적됩니다).  
<br>

#### 5. 전문 모드
![alt text](images/img_2006.png)  
  **>> 이 애드온의 핵심입니다. 간단한 설정으로 스트립 오프셋과 스케일을 자동 조정합니다 <<** - T : 감쇠 모드 [( 상세 설명 )](#2-오프셋-설명)  
  - 네 가지 계산 공식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.  
<br>

- U : 시작 프레임 설정  
  - 리스트 내 모든 오브젝트의 전체 애니메이션 시퀀스에 대한 **시작** 시간을 설정합니다.  
<br>

- V : 오프셋 비율 (앞)  
  - 감쇠 모드(T)로 계산된 편차 값을 곱하여 모든 스트립 시작점의 자동 위치 지정에 사용됩니다.  
<br>

- W : 감쇠 모드 [( 상세 설명 )](#2-오프셋-설명)  
  - 네 가지 계산 공식: 1. 선형 / 2. 이즈 인 / 3. 이즈 아웃 / 4. 이즈 인 아웃.  
<br>

- X : 종료 프레임 설정  
  - 리스트 내 모든 오브젝트의 전체 애니메이션 시퀀스에 대한 **종료** 시간을 설정합니다.  
<br>

- Y : 오프셋 비율 (뒤)  
  - 스트립 종료점의 오프셋 비율입니다.  
<br>

- Z : 전문 NLA 스트라이드 실행 (반복 클릭해도 계산이 누적되지 **않습니다**).  
<br>


---

## ❓ 자주 묻는 질문


#### 1. ⚠️ 「인스턴스화된 데이터 (Instanced Data)」 주의

본 애드온은 주로 NLA 스트립 자체의 오프셋과 정렬을 처리하며, Blender 내의 「인스턴스화된 데이터」 관계를 자동으로 처리하지 **않습니다**.  

#### 인스턴스화된 데이터란 무엇인가요?

**여러 오브젝트가 동일한 데이터를 공유**할 때, 해당 데이터 블록은 「인스턴스화」된 상태입니다.  

- 예:  
  - 두 오브젝트가 동일한 마테리얼을 공유함.  
  - 동일한 액션, 메쉬 또는 기타 데이터 블록을 공유함.  

NLA 에디터에서는 독립된 두 개의 스트립처럼 보일 수 있지만, 실제로는 **내부적으로 동일한 데이터 블록을 가리키고 있습니다**.
이로 인해 **NLA Stride를 사용하여 오프셋**을 적용할 때, 애드온이 서로 다른 스트립을 움직이는 것처럼 보여도 실제로는 동일한 데이터를 수정하게 되어 **기대했던 오프셋 효과가 나타나지 않습니다**.


#### ✅ 해결 방법 ( 아래 그림과 같이 조작 )

> 💡 **핵심 아이디어: 먼저 데이터를 독립시킨 후 오프셋을 진행하십시오.** 단계 ( 그림 참조 ):  

1. 3D 뷰포트에서 처리할 오브젝트를 선택합니다.  
2. **오브젝트 (Object) → 관계 (Relations)**를 엽니다.  
3. **단일 사용자로 만들기 (Make Single User)**를 클릭합니다.  
4. 독립시켜야 할 데이터 유형 ( 예: 오브젝트 애니메이션 )을 선택합니다.  
5. 데이터가 독립된 후 **NLA Stride**를 사용하여 오프셋을 진행합니다.  



![alt text](images/img_3001.png)  

> 데이터가 독립되면 각 오브젝트는 고유한 NLA 데이터를 갖게 됩니다.
> 이제 NLA Stride가 **정상적이고 예측 가능하게 NLA 스트립의 오프셋을 도와줄 수 있습니다**.  

---


#### 2. ⚠️ NLA 일괄 생성

이 애드온의 대상은 NLA 스트립입니다. 애니메이션 데이터가 아직 NLA 스트립으로 「푸시」되지 않았다면 영향을 받지 않습니다.  

#### ✅ 해결 방법: NLA로 푸시 도구

애드온에서 일괄 변환 도구를 제공합니다 ( 아래 녹색 화살표 표시 ). 대상은 뷰포트 선택이 아닌 **리스트 내**의 오브젝트임에 유의하십시오.  

![alt text](images/img_3002.png)  

---



## 📖 기타 설명


#### 1. 정렬 및 오프셋 전략 팁

- 먼저 3D 뷰포트에서 **Alt A**로 모두 선택 해제한 후, **리스트 오브젝트 선택** 기능을 사용하여 리스트 내에 정확히 누가 있는지 확인할 수 있습니다.  
<br>

- **순서**는 매우 중요하며, 이는 오프셋 후의 애니메이션 상태에 직접적인 영향을 미칩니다. 가능하다면 명명 규칙을 활용해 순서를 결정하십시오. 오브젝트가 너무 많다면 나누어서 처리하십시오.  
<br>

- 상태가 엉망이 되었을 때는 정렬 도구를 사용하여 먼저 모두 통일시키십시오.  
<br>

- 애니메이션 오프셋이 매우 간편해졌으므로, 하나의 **완벽한 움직임**을 만드는 데 에너지를 집중하십시오.  
<br>

- 움직임 디자인에 **위치(Location)**가 포함된 경우, 복제 시 애니메이션을 재생하면 동일한 위치로 점프해 돌아갈 수 있음에 주의하십시오. 위치 정보가 NLA에 기록되었기 때문입니다. 이럴 때는 **Ctrl A** 기능을 사용하여 새로운 위치를 **증감 변환(Delta Transforms)** 데이터에 기록할 수 있습니다.  
<br>![alt text](images/img_4001.png)  

---

#### 2. 오프셋 설명
- 선형 중첩 모드 :  
  - 간편 모드 :   
  <a href="images/img_4002.png"><img src="images/img_4002.png" width="650"></a>  
  간편 모드는 원래 상태 ( 위 그림의 가장 왼쪽 )를 기준으로 중첩 모드가 계산됩니다. 그림처럼 오프셋 100, 스케일 1.5로 설정하면 마지막 스트립의 시작점과 길이 ( 종료점 )는 항상 동일해집니다. 하지만 중첩 모드에 따라 다른 스트립의 시작점이 달라져서 서로 다른 오프셋 느낌을 줍니다.  

    ---
  - 전문 모드 :    
  <a href="images/img_4003.png"><img src="images/img_4003.png" width="650"></a>  
  간편 모드와의 차이점은, 전문 모드에서는 앞(Head)과 뒤(Tail)를 조절할 수 있도록 두 개의 중첩 모드를 각각 설정할 수 있다는 점입니다.  
  
    ---
  - **주의** :   
  <a href="images/img_4004.png"><img src="images/img_4004.png" width="650"></a>  
  앞뒤의 두 가지 중첩 모드가 **서로 다를** 경우, 애니메이션 스트립에 문제가 생기지 않는지 ( 너무 짧아지거나 사라짐 ) 주의가 필요합니다.  

---

#### 3. 리스트 아이콘의 의미

![alt text](images/img_3003.gif)  

아이콘 A : 데이터 모드  
아이콘 B : Action은 표준 애니메이션 데이터 ( NLA 아님 )를 나타냅니다.  
아이콘 C : 이미 존재하는 NLA 데이터.  

- B와 C의 아이콘 의미는 A 열의 데이터 모드에 따라 변동됩니다:  
  - ✔ : A 열 모드와 **동일한** 올바른 데이터를 포함함.  
  - ・ : 데이터를 포함하고 있으나, A 열에서 설정한 유형이 **아님**.  
  - ✕ : 데이터를 찾을 수 없음.  

뷰포트 내 데이터:  
| 항목 | 오브젝트 애니메이션 | 마테리얼 애니메이션 | 쉐이프 키 애니메이션 |
|------|------|------|--------|
| **NLA 스트립** | cube.049 | cube.050 | cube.051 | 
| **활성 액션** | cube.027 | cube.037 | cube.038 |  

- 기타 : cube.000 ( 세 가지 NLA 모두 보유 ) / cube.039 ( 애니메이션 데이터 전혀 없음 ).  

---

## 🔧 기술 참조

  [Blender NLA 공식 매뉴얼](https://docs.blender.org/manual/en/latest/editors/nla/index.html)  

  [Blender API 공식 매뉴얼](https://docs.blender.org/api/current/bpy.ops.nla.html)  

  


## 📘 목차

1. [빠른 시작](#-빠른-시작)  
2. [기능 총괄](#-기능-총괄)      
3. [자주 묻는 질문](#-자주-묻는-질문) 
4. [기타](#-기타) 
5. [기술 참조](#-기술-참조)
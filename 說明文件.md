# NLA_stride

**NLA_stride** 是一款專為 Blender 開發的外掛，旨在透過非破壞性的工作流程，實現 NLA 片段（Strips）的批量對齊、偏移與管理。

- **NLA**: 指的是 Blender 內建的非線性動畫編輯器（Non-Linear Animation）。
- **Stride**: 靈感來自 Cinema 4D 的 Stride 概念，透過偏移動畫時間來創造階梯式的動態效果。

本外掛的核心價值在於：**高效控制多個物件、軌道與多種動畫類型的時間節奏**。

---

## 支援版本與安裝說明 (Compatibility)

由於 Blender 4.0 之後推行了新的擴充套件（Extensions）架構，安裝包根據版本分為兩種，請依據您的 Blender 版本選擇下載：

| 壓縮檔名稱 | 支援 Blender 版本 | 說明 |
| :--- | :--- | :--- |
| **`NLA_stride_v1.0.0.zip`** | **3.0 ~ 5.x+** | 傳統外掛格式，相容性廣 |
| **`nla_stride-1.0.0.zip`** | **4.0 以上** | 採 4.0+ 新式打包規範 ( 官方建議 ) |

**安裝步驟：**
1. 下載對應版本的 ZIP 檔案。
2. 開啟 Blender，進入 `Edit → Preferences → Add-ons` 
或是 4.0+ 的 `Edit → Preferences → Extensions`
3. 至右上下拉選單，點擊 `Install from Disk...` 並選擇表格中應對的 ZIP 檔。
4. 勾選啟用 **NLA stride**。

---

## 核心功能

### 1. 智慧選取感應 (Selection Order Aware)
* 自動紀錄物件的選取順序，並將此順序直接應用於 NLA 的偏移邏輯中。

### 2. 批量推送到 NLA (Batch Push)
* 一鍵將多個物件的 Keyframes 轉換為 NLA 片段。

### 3. 支援外部 匯出 / 匯入 清單
* 大量且複雜的專案可以利用匯出清單紀錄當下選取順序。

### 4. 對齊與重設工具 (Align & Reset)
* **5 種對齊目標** 與 **3 種對齊參考模式**。
* 一鍵重設 NLA 片段的縮放比例（Scale）。

### 5. Stride 偏移模式
* **簡單模式 (Simple Stride)**：快速設定固定的偏移幀數。
* **專業模式 (Professional Stride)**：精確控制動畫整體的起始與結束時間。

### 6. 多種動畫類型支援
* 物件動畫 (Object)
* 形態鍵動畫 (Shape Key)
* 材質動畫 (Material)

### 7. 衰減支援 (Falloff)
* 支援 Linear / Ease In / Ease Out / Ease In-Out，讓階梯式偏移更有節奏感。

---

## 三種操作模式

1.  **物件模式 (Object Mode)**：所有片段同步移動（材質模式下可指定偏移目標）。
2.  **單軌模式 (Single Track Mode)**：僅針對同一軌道上的片段進行群組移動。
3.  **單片段模式 (Single Strip Mode)**：支援多選片段移動時的重疊偵測。

---

## 適用場景

* **動態圖形 (Motion Graphics)**：將簡單的基礎動畫快速轉化為複雜的階梯式動態。
* **多物件動畫管理**：如產品分解圖、建築施工動畫等需要嚴謹節奏控制的場景。
* **非破壞性編輯**：利用 NLA 軌道特性，不更動原始 Action 即可調整時間。

---

## 注意事項與限制

* **資料共享問題**：
    由於 Shape Key 與材質動畫是基於「資料（Data）」的，若多個物件共享同一個材質或數據（Instanced Data），調整時可能會產生非預期的結果。
* **建議做法**：
    在使用本外掛前，建議先執行 Blender 內建的：
    `Object -> Relations -> Make Single User -> Materials / Object Data`
* **進階工作流**：
    若需調整外掛尚未支援的數據類型，建議透過 **Custom Properties（自定義屬性）** 驅動該數據，並將屬性推送到 NLA 即可受本外掛控管。

---

## 語言說明 (Language Note)

作者母語為 **繁體中文 (zh-TW)**，外掛中的英文措辭若有不精確之處，歡迎透過 Issue 或 Pull Request 提供建議與回饋。
